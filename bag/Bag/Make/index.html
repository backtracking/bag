<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (bag.Bag.Make)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">bag</a> &#x00BB; <a href="../index.html">Bag</a> &#x00BB; Make</nav><h1>Module <code>Bag.Make</code></h1><nav class="toc"><ul><li><a href="#iterators">Iterators</a></li></ul></nav></header><h3 class="heading">Parameters</h3><ul><li><code><a href="argument-1-X/index.html">X</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></li></ul><h3 class="heading">Signature</h3><dl><dt class="spec type" id="type-elt"><a href="#type-elt" class="anchor"></a><code><span class="keyword">type</span> elt</code><code> = <a href="argument-1-X/index.html#type-t">X.t</a></code></dt><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>The immutable type of bags.</p></dd></dl><dl><dt class="spec value" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span class="keyword">val</span> empty : <a href="index.html#type-t">t</a></code></dt><dd><p>The empty bag.</p></dd></dl><dl><dt class="spec value" id="val-is_empty"><a href="#val-is_empty" class="anchor"></a><code><span class="keyword">val</span> is_empty : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Test for emptiness.</p></dd></dl><dl><dt class="spec value" id="val-occ"><a href="#val-occ" class="anchor"></a><code><span class="keyword">val</span> occ : <a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>occ x b</code> is the number of occurrences of <code>x</code> in bag <code>b</code>. It returns 0 when <code>x</code> is not in <code>b</code>.</p></dd></dl><dl><dt class="spec value" id="val-mem"><a href="#val-mem" class="anchor"></a><code><span class="keyword">val</span> mem : <a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>mem x b</code> checks whether <code>x</code> belongs to <code>b</code>, i.e. has a multiplicty greater than 0.</p></dd></dl><dl><dt class="spec value" id="val-add"><a href="#val-add" class="anchor"></a><code><span class="keyword">val</span> add : <a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> <span>?&#8288;mult:int</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>add x ?mult b</code> returns a new bag where the multiplicity of <code>x</code> is increased by <code>mult</code> (defaults to one). Raises <code>Invalid_argument</code> if <code>mult</code> is negative.</p></dd></dl><dl><dt class="spec value" id="val-update"><a href="#val-update" class="anchor"></a><code><span class="keyword">val</span> update : <a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> <span>(int <span>&#45;&gt;</span> int)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>update x f b</code> returns a bag containing the same elements as <code>b</code>, except for element <code>x</code> whose multiplicity is <code>f (occ x b)</code>. Raises <code>Invalid_argument</code> if <code>f</code> returns a negative value.</p></dd></dl><dl><dt class="spec value" id="val-singleton"><a href="#val-singleton" class="anchor"></a><code><span class="keyword">val</span> singleton : <a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>singleton x</code> is a bag with one element <code>x</code>, with multiplicity <code>1</code>.</p></dd></dl><dl><dt class="spec value" id="val-remove"><a href="#val-remove" class="anchor"></a><code><span class="keyword">val</span> remove : <a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> <span>?&#8288;mult:int</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>remove x ?mult b</code> returns a new bag where the multiplicity of <code>x</code> is decreased by <code>mult</code> (defaults to one). Raises <code>Invalid_argument</code> if <code>mult</code> is negative.</p></dd></dl><dl><dt class="spec value" id="val-remove_all"><a href="#val-remove_all" class="anchor"></a><code><span class="keyword">val</span> remove_all : <a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>remove_all x b</code> returns a new bag where the element <code>x</code> is removed.</p></dd></dl><dl><dt class="spec value" id="val-merge"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>merge f b1 b2</code> computes a bag whose elements are a subset of the elements of <code>b1</code> and of <code>b2</code>. The presence of each such element, and the corresponding multiplicity, is determined with the function <code>f</code>. In terms of the <code>occ</code> operation, we have <code>occ
      x (merge f b1 b2) = f x (occ x b1) (occ x b2)</code> for any element <code>x</code>, provided that <code>f x 0 0 = 0</code>. Raises <code>Invalid_argument</code> if <code>f</code> returns a negative value.</p></dd></dl><dl><dt class="spec value" id="val-cardinal"><a href="#val-cardinal" class="anchor"></a><code><span class="keyword">val</span> cardinal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>cardinal b</code> is the sum of the multiplicities.</p></dd></dl><dl><dt class="spec value" id="val-elements"><a href="#val-elements" class="anchor"></a><code><span class="keyword">val</span> elements : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-elt">elt</a> * int)</span> list</span></code></dt><dd><p>Returns the list of all elements of the given bag. Each element is given with its multiplicity. The returned list is sorted in increasing order of elements with respect to the ordering over the type of the elements.</p></dd></dl><dl><dt class="spec value" id="val-min_elt"><a href="#val-min_elt" class="anchor"></a><code><span class="keyword">val</span> min_elt : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-elt">elt</a> * int</code></dt><dd><p>Returns the smallest element in the given bag (with respect to the ordering) with its multiplicity, or raises <code>Not_found</code> if the bag is empty.</p></dd></dl><dl><dt class="spec value" id="val-min_elt_opt"><a href="#val-min_elt_opt" class="anchor"></a><code><span class="keyword">val</span> min_elt_opt : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-elt">elt</a> * int)</span> option</span></code></dt><dd><p>Returns the smallest element of the given bag (with respect to the ordering) with its multiplicity, or <code>None</code> if the bag is empty.</p></dd></dl><dl><dt class="spec value" id="val-max_elt"><a href="#val-max_elt" class="anchor"></a><code><span class="keyword">val</span> max_elt : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-elt">elt</a> * int</code></dt><dd><p>Returns the largest element in the given bag (with respect to the ordering) with its multiplicity, or raises <code>Not_found</code> if the bag is empty.</p></dd></dl><dl><dt class="spec value" id="val-max_elt_opt"><a href="#val-max_elt_opt" class="anchor"></a><code><span class="keyword">val</span> max_elt_opt : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-elt">elt</a> * int)</span> option</span></code></dt><dd><p>Returns the largest element of the given bag (with respect to the ordering) with its multiplicity, or <code>None</code> if the bag is empty.</p></dd></dl><dl><dt class="spec value" id="val-choose"><a href="#val-choose" class="anchor"></a><code><span class="keyword">val</span> choose : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-elt">elt</a> * int</code></dt><dd><p>Returns one element of the given bag with its multiplicity, or raises <code>Not_found</code> if the bag is empty. Which binding is chosen is unspecified, but equal elements will be chosen for equal bags.</p></dd></dl><dl><dt class="spec value" id="val-choose_opt"><a href="#val-choose_opt" class="anchor"></a><code><span class="keyword">val</span> choose_opt : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-elt">elt</a> * int)</span> option</span></code></dt><dd><p>Returns one element of the given bag, or <code>None</code> if the set is empty. Which element is chosen is unspecified, but equal elements will be chosen for equal bags.</p></dd></dl><dl><dt class="spec value" id="val-union"><a href="#val-union" class="anchor"></a><code><span class="keyword">val</span> union : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>union b1 b2</code> returns a new bag <code>b</code> where, for all element x, <code>occ x b = max (occ x b1) (occ x b2)</code>.</p></dd></dl><dl><dt class="spec value" id="val-sum"><a href="#val-sum" class="anchor"></a><code><span class="keyword">val</span> sum : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>sum b1 b2</code> returns a new bag <code>b</code> where, for all element x, <code>occ x b = occ x b1 + occ x b2</code>.</p></dd></dl><dl><dt class="spec value" id="val-inter"><a href="#val-inter" class="anchor"></a><code><span class="keyword">val</span> inter : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>inter b1 b2</code> returns a new bag <code>b</code> where, for all element x, <code>occ x b = min (occ x b1) (occ x b2)</code>.</p></dd></dl><dl><dt class="spec value" id="val-diff"><a href="#val-diff" class="anchor"></a><code><span class="keyword">val</span> diff : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>diff b1 b2</code> returns a new bag <code>b</code> where, for all element x, <code>occ x b = max 0 (occ x b1 - occ x b2)</code>.</p></dd></dl><dl><dt class="spec value" id="val-disjoint"><a href="#val-disjoint" class="anchor"></a><code><span class="keyword">val</span> disjoint : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p>Test if two bags are disjoint.</p></dd></dl><dl><dt class="spec value" id="val-included"><a href="#val-included" class="anchor"></a><code><span class="keyword">val</span> included : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>included b1 b2</code> returns true if and only if, for all element x, <code>occ x b1 &lt;= occ x b2</code>.</p></dd></dl><dl><dt class="spec value" id="val-iter"><a href="#val-iter" class="anchor"></a><code><span class="keyword">val</span> iter : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>iter f b</code> applies <code>f</code> to all elements in bag <code>b</code>. <code>f</code> receives the element as first argument, and its multiplicity as second argument. The elements are passed to <code>f</code> in increasing order with respect to the ordering over the type of the elements.</p></dd></dl><dl><dt class="spec value" id="val-fold"><a href="#val-fold" class="anchor"></a><code><span class="keyword">val</span> fold : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span>)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'a</span> <span>&#45;&gt;</span> <span class="type-var">'a</span></code></dt><dd><p><code>fold f b a</code> computes <code>(f xN mN ... (f x1 m1 a)...)</code> , where <code>x1 ... xN</code> are the elements in bag <code>b</code> (in increasing order), and <code>m1 ... mN</code> are their multiplicities.</p></dd></dl><dl><dt class="spec value" id="val-for_all"><a href="#val-for_all" class="anchor"></a><code><span class="keyword">val</span> for_all : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>for_all p b</code> checks if all the elements of the bag satisfy the predicate <code>p</code>.</p></dd></dl><dl><dt class="spec value" id="val-exists"><a href="#val-exists" class="anchor"></a><code><span class="keyword">val</span> exists : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>exists p b</code> checks if at least one element of the bag satisfies the predicate <code>p</code>.</p></dd></dl><dl><dt class="spec value" id="val-filter"><a href="#val-filter" class="anchor"></a><code><span class="keyword">val</span> filter : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>filter p b</code> returns the bag with all the elements in <code>b</code> that satisfy predicate <code>p</code>. Multiplicities are unchanged.</p></dd></dl><dl><dt class="spec value" id="val-partition"><a href="#val-partition" class="anchor"></a><code><span class="keyword">val</span> partition : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> * <a href="index.html#type-t">t</a></code></dt><dd><p><code>partition p b</code> returns a pair of bags <code>(b1, b2)</code>, where <code>b1</code> contains all the elements of <code>b</code> that satisfy the predicate <code>p</code>, and <code>b2</code> is the bag with all the elements of <code>b</code> that do not satisfy <code>p</code>.</p></dd></dl><dl><dt class="spec value" id="val-split"><a href="#val-split" class="anchor"></a><code><span class="keyword">val</span> split : <a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> * int * <a href="index.html#type-t">t</a></code></dt><dd><p><code>split x b</code> returns a triple <code>(l, m, r)</code>, where <code>l</code> is the bag with all the elements of <code>b</code> that are strictly less than <code>x</code>; <code>r</code> is the bag with all the elements of <code>b</code> that are strictly greater than <code>x</code>; <code>m</code> is the multiplicity of <code>x</code> in <code>b</code>.</p></dd></dl><dl><dt class="spec value" id="val-find_first"><a href="#val-find_first" class="anchor"></a><code><span class="keyword">val</span> find_first : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-elt">elt</a> * int</code></dt><dd><p><code>find_first f b</code>, where <code>f</code> is a monotonically increasing function, returns the lowest element <code>x</code> of <code>b</code> such that <code>f x</code>, or raises <code>Not_found</code> if no such key exists.</p></dd></dl><dl><dt class="spec value" id="val-find_first_opt"><a href="#val-find_first_opt" class="anchor"></a><code><span class="keyword">val</span> find_first_opt : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-elt">elt</a> * int)</span> option</span></code></dt><dd><p><code>find_first_opt f b</code>, where <code>f</code> is a monotonically increasing function, returns an option containing the lowest element <code>x</code> of <code>b</code> such that <code>f x</code>, or <code>None</code> if no such key exists.</p></dd></dl><dl><dt class="spec value" id="val-find_last"><a href="#val-find_last" class="anchor"></a><code><span class="keyword">val</span> find_last : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-elt">elt</a> * int</code></dt><dd><p><code>find_last f b</code>, where <code>f</code> is a monotonically decreasing function, returns the largest element <code>x</code> of <code>b</code> such that <code>f x</code>, or raises <code>Not_found</code> if no such key exists.</p></dd></dl><dl><dt class="spec value" id="val-find_last_opt"><a href="#val-find_last_opt" class="anchor"></a><code><span class="keyword">val</span> find_last_opt : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> bool)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-elt">elt</a> * int)</span> option</span></code></dt><dd><p><code>find_last_opt f b</code>, where <code>f</code> is a monotonically decreasing function, returns an option containing the largest element <code>x</code> of <code>m</code> such that <code>f x</code>, or <code>None</code> if no such key exists.</p></dd></dl><dl><dt class="spec value" id="val-map"><a href="#val-map" class="anchor"></a><code><span class="keyword">val</span> map : <span>(int <span>&#45;&gt;</span> int)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>map f b</code> returns a bag with same elements as <code>b</code>, where the multiplicity <code>m</code> of each element of <code>b</code> has been updated by the result of the application of <code>f</code> to <code>m</code>. The elements are passed to <code>f</code> in increasing order with respect to the ordering over the type of the elements. Raises <code>Invalid_argument</code> if <code>f</code> returns a negative value.</p></dd></dl><dl><dt class="spec value" id="val-mapi"><a href="#val-mapi" class="anchor"></a><code><span class="keyword">val</span> mapi : <span>(<a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int)</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Same as <span class="xref-unresolved" title="unresolved reference to &quot;Bag.map&quot;"><a href="../index.html"><code>Bag</code></a>.map</span>, but the function receives as arguments both the element and the associated multiplicity. Raises <code>Invalid_argument</code> if <code>f</code> returns a negative value.</p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Total ordering between bags.</p></dd></dl><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>equal b1 b2</code> tests whether the bags <code>b1</code> and <code>b2</code> are equal, that is, contain equal elements with equal multiplicities.</p></dd></dl><section><header><h2 id="iterators"><a href="#iterators" class="anchor"></a>Iterators</h2></header><dl><dt class="spec value" id="val-to_seq"><a href="#val-to_seq" class="anchor"></a><code><span class="keyword">val</span> to_seq : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-elt">elt</a> * int)</span> Stdlib.Seq.t</span></code></dt><dd><p>Iterates on the whole bag, in ascending order of elements.</p></dd></dl><dl><dt class="spec value" id="val-to_seq_from"><a href="#val-to_seq_from" class="anchor"></a><code><span class="keyword">val</span> to_seq_from : <a href="index.html#type-elt">elt</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-elt">elt</a> * int)</span> Stdlib.Seq.t</span></code></dt><dd><p><code>to_seq_from x b</code> iterates on a subset of <code>b</code>, in ascending order of elements, from element <code>x</code> or above.</p></dd></dl><dl><dt class="spec value" id="val-add_seq"><a href="#val-add_seq" class="anchor"></a><code><span class="keyword">val</span> add_seq : <span><span>(<a href="index.html#type-elt">elt</a> * int)</span> Stdlib.Seq.t</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Adds the given elements to the bag, in order. Raises <code>Invalid_argument</code> if a multiplicity is negative.</p></dd></dl><dl><dt class="spec value" id="val-of_seq"><a href="#val-of_seq" class="anchor"></a><code><span class="keyword">val</span> of_seq : <span><span>(<a href="index.html#type-elt">elt</a> * int)</span> Stdlib.Seq.t</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p>Builds a bag from the given elements and multiplicities. Raises <code>Invalid_argument</code> if a multiplicity is negative.</p></dd></dl></section></div></body></html>